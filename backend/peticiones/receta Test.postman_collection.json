{
	"info": {
		"_postman_id": "572c40f4-0375-496b-a124-3ecb3e117abc",
		"name": "Recetas Test",
		"description": "Colección para probar CRUD de recetas y categorías.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "48646690"
	},
	"item": [
		{
			"name": "Test a la API",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/",
					"host": [
						"{{base_url}}"
					],
					"path": [
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Recetas",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Añadir Receta",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Successful POST request\", function () {",
							"    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
							"});",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"nombre\": \"Paella Valenciana\",\n  \"descripcion\": \"Receta tradicional de arroz con pollo y verduras\",\n  \"ingredientes\": \"Arroz, pollo, judía verde, garrofón, tomate, aceite, agua\",\n  \"instrucciones\": \"Sofreír, añadir agua y arroz, cocinar 18-20 minutos\",\n  \"categorias\": [\"Española\", \"Arroces\"],\n  \"valoracion\": {\n    \"puntuacion\": 5,\n    \"votos\": 10\n  }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/anadir",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"anadir"
					]
				}
			},
			"response": []
		},
		{
			"name": "Añadir Receta Inválida (400)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 400\", function () {",
							"    pm.response.to.have.status(400);",
							"});",
							"pm.test(\"Response has validation errors\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData.status).to.eql('Validation error');",
							"    pm.expect(jsonData.errors).to.be.an('object');",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"nombre\": \"\",\n  \"descripcion\": \"\",\n  \"ingredientes\": \"\",\n  \"instrucciones\": \"\",\n  \"categorias\": [],\n  \"valoracion\": {\n    \"puntuacion\": null,\n    \"votos\": null\n  }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/anadir",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"anadir"
					]
				}
			},
			"response": []
		},
		{
			"name": "Actualizar Receta",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Successful PUT request\", function () {",
							"    pm.expect(pm.response.code).to.be.oneOf([200, 201, 204]);",
							"});",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"nombre\": \"Paella Mixta\",\n  \"descripcion\": \"Versión con pollo y marisco\",\n  \"ingredientes\": \"Arroz, pollo, calamar, gambas, verduras, caldo\",\n  \"instrucciones\": \"Preparar sofrito, añadir caldo y arroz, cocer\",\n  \"categorias\": [\"Española\", \"Arroces\"],\n  \"valoracion\": {\n    \"puntuacion\": 4,\n    \"votos\": 22\n  }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/actualizar/{{id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"actualizar",
						"{{id}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Eliminar Receta",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Successful DELETE request\", function () {",
							"    pm.expect(pm.response.code).to.be.oneOf([200, 202, 204]);",
							"});",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/{{id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"{{id}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Una Receta",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/receta/{{id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"receta",
						"{{id}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Categorias",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/categorias",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"categorias"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "id",
			"value": "PON_AQUI_UN_ID_REAL_DE_RECETA"
		},
		{
			"key": "base_url",
			"value": "http://localhost:3000/api/v1/recetas"
		}
	]
}